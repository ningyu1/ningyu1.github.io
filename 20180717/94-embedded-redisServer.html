<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-113235655-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?83434579b8f6b6a6c80fd1b4fe2d9afa"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="tyyr-WLO-Sq85TjMOOOHRRc5YD4W8if8mCXbUD_p_7k">
    
    
    <meta name="sogou_site_verification" content="PlW7T4UKFR">
    
    
    <meta name="baidu-site-verification" content="AdjyK6UssW">
    
    
    <meta name="msvalidate.01" content="BC20DDADC069448DFBCA67D9D7D57546">
    
    
    <meta name="360-site-verification" content="3addb98f1fb5f6b4d1ce03efc23bf5b8">
    
    
    
    <title>使用Embedded RedisServer写UT | 凝雨 - Yun | 快乐编程每一天 - Happy Coding Every Day</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="test,redis,Can&#39;t start redis server. Check logs for details.">
    <meta name="description" content="使用Embedded RedisServer写UT">
<meta name="keywords" content="test,redis,Can&#39;t start redis server. Check logs for details.">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Embedded RedisServer写UT">
<meta property="og:url" content="https://ningyu1.github.io/20180717/94-embedded-redisServer.html">
<meta property="og:site_name" content="凝雨 - Yun">
<meta property="og:description" content="使用Embedded RedisServer写UT">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2024-04-23T01:48:15.038Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用Embedded RedisServer写UT">
<meta name="twitter:description" content="使用Embedded RedisServer写UT">
    
        <link rel="alternate" type="application/atom+xml" title="凝雨 - Yun" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">凝雨</h5>
          <a href="mailto:ningbe111@163.com" title="ningbe111@163.com" class="mail">ningbe111@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ningyu1" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/atom.xml" target="_blank" >
                <i class="icon icon-lg icon-rss"></i>
                Rss
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://g2.okk.dog/?path=register&code=qn7nOwdj" target="_blank" >
                <i class="icon icon-lg icon-rocket"></i>
                科学上网
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">使用Embedded RedisServer写UT</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">使用Embedded RedisServer写UT</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-07-17T10:11:00.000Z" itemprop="datePublished" class="page-time">
  2018-07-17
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/test/">test</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/test/redis/">redis</a></li></ul></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>文章目录</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#代码示例"><span class="post-toc-number">1.</span> <span class="post-toc-text">代码示例</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#更多用法"><span class="post-toc-number">2.</span> <span class="post-toc-text">更多用法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#有可能我们启动会遇到下面的错误："><span class="post-toc-number">3.</span> <span class="post-toc-text">有可能我们启动会遇到下面的错误：</span></a></li></ol>
        </nav>
    </aside>


<article id="post-94-embedded-redisServer"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">使用Embedded RedisServer写UT</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-07-17 18:11:00" datetime="2018-07-17T10:11:00.000Z"  itemprop="datePublished">2018-07-17</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/test/">test</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/test/redis/">redis</a></li></ul></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>当我们在进行开发的时候经常会用到<code>Redis</code>，但是在写<code>junit</code>的时候往往引用了<code>Redis</code>造成<code>test case</code>很难写，我们需要<code>mock</code>一个<code>localhost</code>的<code>Redis server</code>来进行测试，因此我们可以借助<code>embedded redisServer</code>来实现，下面我们就看一下具体使用的示例</p>
<h2 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Before</span><br><span class="line">public void setUp() throws IOException &#123;</span><br><span class="line">    initMocks(this);</span><br><span class="line">    final Random random = new SecureRandom();</span><br><span class="line">    redisServer = new RedisServer();</span><br><span class="line">    redisServer.start();</span><br><span class="line"> </span><br><span class="line">    pool = new JedisPool();</span><br><span class="line">    repository = new RedisKeyRepository(pool);</span><br><span class="line">    manager = new RedisKeyManager(random, pool, repository);</span><br><span class="line">    manager.setMaxActiveKeys(3);</span><br><span class="line"> </span><br><span class="line">    clearData();</span><br><span class="line">    manager.initialiseNewRepository();</span><br><span class="line"> </span><br><span class="line">    resource = new ProtectedResource(repository, random);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span style="color:blue"><em>这是一个非常简单的使用示例，我们还可以更改配置以及增加密码</em></span></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Before</span><br><span class="line">public void setUpRedis() throws IOException, SchedulerConfigException &#123;</span><br><span class="line">    port = getPort();</span><br><span class="line">    logger.debug(&quot;Attempting to start embedded Redis server on port &quot; + port);</span><br><span class="line">    redisServer = RedisServer.builder()</span><br><span class="line">            .port(port)</span><br><span class="line">            .build();</span><br><span class="line">    redisServer.start();</span><br><span class="line">    final short database = 1;</span><br><span class="line">    JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();</span><br><span class="line">    jedisPoolConfig.setTestOnBorrow(true);</span><br><span class="line">    jedisPool = new JedisPool(jedisPoolConfig, host, port, Protocol.DEFAULT_TIMEOUT, null, database);</span><br><span class="line"> </span><br><span class="line">    jobStore = new RedisJobStore();</span><br><span class="line">    jobStore.setHost(host);</span><br><span class="line">    jobStore.setLockTimeout(2000);</span><br><span class="line">    jobStore.setPort(port);</span><br><span class="line">    jobStore.setInstanceId(&quot;testJobStore1&quot;);</span><br><span class="line">    jobStore.setDatabase(database);</span><br><span class="line">    mockScheduleSignaler = mock(SchedulerSignaler.class);</span><br><span class="line">    jobStore.initialize(null, mockScheduleSignaler);</span><br><span class="line">    schema = new RedisJobStoreSchema();</span><br><span class="line"> </span><br><span class="line">    jedis = jedisPool.getResource();</span><br><span class="line">    jedis.flushDB();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span style="color:blue"><em>使用<code>RedisServerBuilder</code>构建<code>Redis server</code>，并且指定port</em></span></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Test</span><br><span class="line">//Note the try/finally is to ensure that the server is shutdown so other tests do not have to</span><br><span class="line">//provide auth information</span><br><span class="line">public void testAuth() throws Exception &#123;</span><br><span class="line"> </span><br><span class="line">  RedisServer server = RedisServer.builder().port(6381).setting(&quot;requirepass foobar&quot;).build();</span><br><span class="line">  server.start();</span><br><span class="line">  RedisOptions job = new RedisOptions()</span><br><span class="line">    .setHost(&quot;localhost&quot;)</span><br><span class="line">    .setPort(6381);</span><br><span class="line">  RedisClient rdx = RedisClient.create(vertx, job);</span><br><span class="line"> </span><br><span class="line">  rdx.auth(&quot;barfoo&quot;, reply -&gt; &#123;</span><br><span class="line">    assertFalse(reply.succeeded());</span><br><span class="line">    rdx.auth(&quot;foobar&quot;, reply2 -&gt; &#123;</span><br><span class="line">      assertTrue(reply2.succeeded());</span><br><span class="line">      try &#123;</span><br><span class="line">        server.stop();</span><br><span class="line">      &#125; catch (Exception ignore) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">      testComplete();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  await();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span style="color:blue"><em>设置一个需要密码访问的Redis server，setting可以设置redis conf中的所有属性</em></span></p>
<h2 id="更多用法"><a href="#更多用法" class="headerlink" title="更多用法"></a>更多用法</h2><p>还有很多用法，具体查看下面的代码示例</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testDebugSegfault() throws Exception &#123;</span><br><span class="line"> </span><br><span class="line">  RedisServer server = RedisServer.builder().port(6381).build();</span><br><span class="line">  server.start();</span><br><span class="line">  RedisOptions job = new RedisOptions()</span><br><span class="line">    .setHost(&quot;localhost&quot;)</span><br><span class="line">    .setPort(6381);</span><br><span class="line">  RedisClient rdx = RedisClient.create(vertx, job);</span><br><span class="line"> </span><br><span class="line">  rdx.debugSegfault(reply -&gt; &#123;</span><br><span class="line">    // this should fail, since we crashed the server on purpose</span><br><span class="line">    assertTrue(reply.failed());</span><br><span class="line">    rdx.info(reply2 -&gt; &#123;</span><br><span class="line">      assertFalse(reply2.succeeded());</span><br><span class="line">      server.stop();</span><br><span class="line">      testComplete();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  await();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public RedisServerResource(int port, String password) &#123;</span><br><span class="line">    this.port = port;</span><br><span class="line">    try &#123;</span><br><span class="line">        RedisExecProvider redisExecProvider = RedisExecProvider.defaultProvider();</span><br><span class="line">        this.redisServer = RedisServer</span><br><span class="line">                .builder()</span><br><span class="line">                .redisExecProvider(redisExecProvider)</span><br><span class="line">                .port(port)</span><br><span class="line">                .setting(&quot;requirepass &quot; + password)</span><br><span class="line">                .build();</span><br><span class="line">    &#125; catch (Throwable error) &#123;</span><br><span class="line">        String message = String.format(&quot;failed creating Redis server (port=%d)&quot;, port);</span><br><span class="line">        throw new RuntimeException(message, error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Before</span><br><span class="line">public void before() throws Exception &#123;</span><br><span class="line">  mockTracer.reset();</span><br><span class="line"> </span><br><span class="line">  redisServer = RedisServer.builder().setting(&quot;bind 127.0.0.1&quot;).build();</span><br><span class="line">  redisServer.start();</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">private void startServer(TestContext testContext) &#123;</span><br><span class="line">    EmbeddedRedis embeddedRedis = AnnotationUtils.findAnnotation(testContext.getTestClass(), EmbeddedRedis.class);</span><br><span class="line">    int port = embeddedRedis.port();</span><br><span class="line"> </span><br><span class="line">    try &#123;</span><br><span class="line">        server = new RedisServer(port);</span><br><span class="line">        server.start();</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        if (logger.isErrorEnabled()) &#123;</span><br><span class="line">            logger.error(e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private RedisServer createRedisServer() &#123;</span><br><span class="line">    final RedisServerBuilder redisServerBuilder = RedisServer.builder()</span><br><span class="line">            .port(redisPort)</span><br><span class="line">            .setting(&quot;appendonly yes&quot;)</span><br><span class="line">            .setting(&quot;appendfsync everysec&quot;);</span><br><span class="line">    settings.stream().forEach(s -&gt; redisServerBuilder.setting(s));</span><br><span class="line"> </span><br><span class="line">    final RedisServer redisServer = redisServerBuilder.build();</span><br><span class="line">    return redisServer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="有可能我们启动会遇到下面的错误："><a href="#有可能我们启动会遇到下面的错误：" class="headerlink" title="有可能我们启动会遇到下面的错误："></a>有可能我们启动会遇到下面的错误：</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.RuntimeException: Can&apos;t start redis server. Check logs for details.</span><br><span class="line">    at redis.embedded.AbstractRedisInstance.awaitRedisServerReady(AbstractRedisInstance.java:66)</span><br><span class="line">    at redis.embedded.AbstractRedisInstance.start(AbstractRedisInstance.java:37)</span><br><span class="line">    at redis.embedded.RedisServer.start(RedisServer.java:11)</span><br><span class="line">    at com.bignibou.configuration.session.EmbeddedRedisConfiguration$RedisServerBean.afterPropertiesSet(EmbeddedRedisConfiguration.java:26)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1633)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1570)</span><br><span class="line">    ... 15 more</span><br></pre></td></tr></table></figure>
<p>这个是什么原因呢？我们进一步debug输出redis server的log看是什么问题，redis log如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">The windows version of redis allocates a large memory mapped file for sharing the heap with the forked process used in persistence operations. This file will be created in the current working directory or the directory specified by the &apos;heapdir&apos; directive in the</span><br><span class="line">.conf file. Windows is reporting that there is insufficient disk space available for this file (Windows error 0x70).</span><br><span class="line">You may fix this probilem by either reducing the size of the Redis heap with the --maxheap flag, or by moving the heap file to a local drive with sufficient space.</span><br><span class="line">Please see the documentation included with the binary distributions for more details on the --maxheap and --heapdir flags.</span><br><span class="line">Redis can not continue, Exiting.</span><br></pre></td></tr></table></figure>
<p>这里的原因是我们启动的时候<code>heap</code>不够，redis server默认的<code>maxheap:1024000000</code>，创建<code>.conf</code>文件时硬盘不够，那如何解决这个错误呢？</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testAuth() throws Exception &#123;</span><br><span class="line">  RedisServer server = RedisServer.builder().port(6381).setting(&quot;maxheap 51200000&quot;).build();</span><br><span class="line">  server.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于<code>redis maxheap</code>的详细描述如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># The Redis heap must be larger than the value specified by the maxmemory</span><br><span class="line"># flag, as the heap allocator has its own memory requirements and</span><br><span class="line"># fragmentation of the heap is inevitable. If only the maxmemory flag is</span><br><span class="line"># specified, maxheap will be set at 1.5*maxmemory. If the maxheap flag is</span><br><span class="line"># specified along with maxmemory, the maxheap flag will be automatically</span><br><span class="line"># increased if it is smaller than 1.5*maxmemory.</span><br><span class="line"># </span><br><span class="line"># maxheap &lt;bytes&gt;</span><br><span class="line">maxheap 51200000</span><br></pre></td></tr></table></figure>
<p><span style="color:blue"><em>注意：修改时需要考虑可用量，常规情况都无需修改这个参数</em></span></p>
<p><a href="https://www.programcreek.com/java-api-examples/index.php?api=redis.embedded.RedisServer" target="_blank" rel="noopener">更多查看官方文档</a></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-04-23T01:48:15.038Z" itemprop="dateUpdated">2024-04-23 09:48:15</time>
</span><br>


        
        原始链接：<a href="/20180717/94-embedded-redisServer.html" target="_blank" rel="external">https://ningyu1.github.io/20180717/94-embedded-redisServer.html</a><br>版权声明：本文由 <strong>凝雨-Yun</strong> 原创，采用<strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a></strong>进行许可。 <br><strong>转载请注明作者及出处！</strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
        
    </div>
    
    <footer>
        <a href="https://ningyu1.github.io">
            <img src="/img/avatar.jpg" alt="凝雨">
            凝雨
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Can-t-start-redis-server-Check-logs-for-details/">Can't start redis server. Check logs for details.</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/test/">test</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&title=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&title=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20180717/94-embedded-redisServer.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/20180802/95-downloadjs-cors.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">使用downloadjs下载并且重命名文件名称引发的跨域问题</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/20180711/93-maven-depenpency-analyze.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">通过对Maven的依赖分析剔除无用的jar引用</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: '298f0d78bd14c9c0ff01',
          clientSecret: 'e81e4d36caf1a13d2f05ed5dcf30e636dde749ac',
          repo: 'blog',
          owner: 'ningyu1',
          admin: ['ningyu1'],
          id: id,      // Ensure uniqueness and length less than 50
	  //id: 'Comments',
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        可以吃个鸡腿吗？
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh">知识共享署名-相同方式共享 4.0 国际许可协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>凝雨 &copy; 2016 - 2024</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&title=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&title=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20180717/94-embedded-redisServer.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《使用Embedded RedisServer写UT》 — 凝雨 - Yun&url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20180717/94-embedded-redisServer.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACsklEQVR42u3aUY7CMAwFQO5/afYAqOU9J0HVavqFltBmspLj2nm94ut9e32O/PzV1befn++f+Dpx4eHh4R2Y+v1Er+7Tsq8A9+O/LAEeHh7eMd7VTe/HJHdIwno79WTOeHh4eE/jJWE9IeV4PDw8vP/Eu5/ubOSDNgY8PDy8hWJEG9bbMu7etBsPDw/vHC/vIj3n85H+Hh4eHt5yVz1vhrWp9qzZVs8WDw8P7wAvD7j5cav2wMFsc8oLvnh4eHjneHkiex+yd+W37eGtyznj4eHhHeCttOfb5tb6JjFbXDw8PLxzvFkLvw3fecOsXbhLJB4eHt4mXhus80Dfsk8UJvDw8PBO8/LG1Sz0z5L1fFuK+nt4eHh4y7w8qd1bOGjbZu2m1fTH8PDw8Oa8pAG2nlKv5MBt4RgPDw/vNG9Wtlg5NDBLtfNf4eHh4f2G1x5pah+cA/I0uihG4+Hh4W3i5S//7dHSlfvMSrpL9RU8PDy8gDdr9ueJ7Oyg1a6jDHh4eHgneG35NS89rCTEbVXhywzx8PDwtvKSwsFsTPuXfCvK0248PDy8X/La4sLprlObXhfrhIeHhzc6z5mkp+2RrJXi76zlFhUj8PDw8JZ5eRNrQ4K79ehA3dnDw8PD28RrX/7rCvFoIZKRRZkDDw8P74e8/LV/Nt3kbrN/wHQPwcPDw+t460XVvGDRtriWEnc8PDy8H/JmAbq9Q9tOaxcaDw8Pby/vXV5tKG/b/PmSRW0wPDw8vAO8NviuhPK2jNum6a/1vQUPDw+v7K3nj0nu046ZbULJZoOHh4d3jteeVso3jHzSu4oReHh4eM/k5bD2WQk7LzHj4eHhPYHXlifajWFWXL604OHh4R3j5ceb2gDdLkG75XwZj4eHh3eAt+GFvyxhJBtGu6wb+nt4eHh43+fzB525NcqVahTXAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-indigo-patch@1.0.0/source/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
