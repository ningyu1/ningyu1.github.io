<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-113235655-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?83434579b8f6b6a6c80fd1b4fe2d9afa"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="tyyr-WLO-Sq85TjMOOOHRRc5YD4W8if8mCXbUD_p_7k">
    
    
    <meta name="sogou_site_verification" content="PlW7T4UKFR">
    
    
    <meta name="baidu-site-verification" content="AdjyK6UssW">
    
    
    <meta name="msvalidate.01" content="BC20DDADC069448DFBCA67D9D7D57546">
    
    
    <meta name="360-site-verification" content="3addb98f1fb5f6b4d1ce03efc23bf5b8">
    
    
    
    <title>Fastdfs安装说明与常见问题解决 | 凝雨 - Yun | 快乐编程每一天 - Happy Coding Every Day</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="fastdfs">
    <meta name="description" content="Fastdfs安装说明与常见问题解决">
<meta name="keywords" content="fastdfs">
<meta property="og:type" content="article">
<meta property="og:title" content="Fastdfs安装说明与常见问题解决">
<meta property="og:url" content="https://ningyu1.github.io/20170704/02-fastdfs-installer.html">
<meta property="og:site_name" content="凝雨 - Yun">
<meta property="og:description" content="Fastdfs安装说明与常见问题解决">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2024-04-23T01:48:15.028Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fastdfs安装说明与常见问题解决">
<meta name="twitter:description" content="Fastdfs安装说明与常见问题解决">
    
        <link rel="alternate" type="application/atom+xml" title="凝雨 - Yun" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">凝雨</h5>
          <a href="mailto:ningbe111@163.com" title="ningbe111@163.com" class="mail">ningbe111@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ningyu1" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/atom.xml" target="_blank" >
                <i class="icon icon-lg icon-rss"></i>
                Rss
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://g2.okk.dog/?path=register&code=qn7nOwdj" target="_blank" >
                <i class="icon icon-lg icon-rocket"></i>
                科学上网
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Fastdfs安装说明与常见问题解决</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Fastdfs安装说明与常见问题解决</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-07-04T00:00:00.000Z" itemprop="datePublished" class="page-time">
  2017-07-04
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/fastdfs/">fastdfs</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>文章目录</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Fastdfs安装说明与常见问题解决"><span class="post-toc-number">1.</span> <span class="post-toc-text">Fastdfs安装说明与常见问题解决</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#docker中安装"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">docker中安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#物理机安装"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">物理机安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-安装git"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">1.安装git</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-下载fastdfs源码"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">2.下载fastdfs源码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-下载nginx"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">3.下载nginx</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-安装libfastcommon-fastdfs依赖的系统库）"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">4.安装libfastcommon (fastdfs依赖的系统库）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-安装fastdfs"><span class="post-toc-number">1.2.5.</span> <span class="post-toc-text">5.安装fastdfs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-安装nginx"><span class="post-toc-number">1.2.6.</span> <span class="post-toc-text">6.安装nginx</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-配置fastdfs"><span class="post-toc-number">1.2.7.</span> <span class="post-toc-text">7.配置fastdfs</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-1-创建数据存放目录（用于存放数据）"><span class="post-toc-number">1.2.7.1.</span> <span class="post-toc-text">7.1 创建数据存放目录（用于存放数据）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#tracker基础数据和日志"><span class="post-toc-number">1.2.7.1.1.</span> <span class="post-toc-text">tracker基础数据和日志</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#storage基础数据和日志"><span class="post-toc-number">1.2.7.1.2.</span> <span class="post-toc-text">storage基础数据和日志</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#storage-数据存放目录"><span class="post-toc-number">1.2.7.1.3.</span> <span class="post-toc-text">storage 数据存放目录</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#fast-nginx模块基础数据和日志"><span class="post-toc-number">1.2.7.1.4.</span> <span class="post-toc-text">fast nginx模块基础数据和日志</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-2-创建配置文件目录（用于存放使用的配置文件）"><span class="post-toc-number">1.2.7.2.</span> <span class="post-toc-text">7.2 创建配置文件目录（用于存放使用的配置文件）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-3-配置tracker"><span class="post-toc-number">1.2.7.3.</span> <span class="post-toc-text">7.3 配置tracker</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#编辑basepath"><span class="post-toc-number">1.2.7.3.1.</span> <span class="post-toc-text">编辑basepath</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-4-配置storage"><span class="post-toc-number">1.2.7.4.</span> <span class="post-toc-text">7.4 配置storage</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#修改如下配置："><span class="post-toc-number">1.2.7.4.1.</span> <span class="post-toc-text">修改如下配置：</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#这个是tracker的ip地址和端口号"><span class="post-toc-number">1.2.7.4.2.</span> <span class="post-toc-text">这个是tracker的ip地址和端口号</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-5-修改nginx相关的fastdfs配置文件"><span class="post-toc-number">1.2.7.5.</span> <span class="post-toc-text">7.5 修改nginx相关的fastdfs配置文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#9-编写启动脚本"><span class="post-toc-number">1.2.7.6.</span> <span class="post-toc-text">9. 编写启动脚本</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#9-1-创建-启动文件目录"><span class="post-toc-number">1.2.7.7.</span> <span class="post-toc-text">9.1 创建 启动文件目录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#9-2-在bin目录下，创建tracker-sh"><span class="post-toc-number">1.2.7.7.1.</span> <span class="post-toc-text">9.2 在bin目录下，创建tracker.sh</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#9-3-在bin目录下，创建storage-sh"><span class="post-toc-number">1.2.7.7.2.</span> <span class="post-toc-text">9.3 在bin目录下，创建storage.sh</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#9-4-配置、启动nginx"><span class="post-toc-number">1.2.7.7.3.</span> <span class="post-toc-text">9.4 配置、启动nginx</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#遇到的错误"><span class="post-toc-number">1.2.7.8.</span> <span class="post-toc-text">遇到的错误</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Fastdfs-Client测试"><span class="post-toc-number">1.2.7.9.</span> <span class="post-toc-text">Fastdfs Client测试</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#查看Fastdfs集群监控信息"><span class="post-toc-number">1.2.7.10.</span> <span class="post-toc-text">查看Fastdfs集群监控信息</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-02-fastdfs-installer"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Fastdfs安装说明与常见问题解决</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-07-04 08:00:00" datetime="2017-07-04T00:00:00.000Z"  itemprop="datePublished">2017-07-04</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/fastdfs/">fastdfs</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Fastdfs安装说明与常见问题解决"><a href="#Fastdfs安装说明与常见问题解决" class="headerlink" title="Fastdfs安装说明与常见问题解决"></a>Fastdfs安装说明与常见问题解决</h1><h2 id="docker中安装"><a href="#docker中安装" class="headerlink" title="docker中安装"></a>docker中安装</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull season/fastdfs</span><br><span class="line">docker tag season/fastdfs 192.168.0.34:5000/season/fastdfs</span><br><span class="line">docker push 192.168.0.34:5000/season/fastdfs</span><br></pre></td></tr></table></figure>
<p>启动会获取tracker ip<br><code>192.168.0.54:22122</code></p>
<p>monitor检测<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/local/bin/fdfs_monitor /etc/fdfs/storage.conf</span><br></pre></td></tr></table></figure></p>
<p>storage<br>store_path0路径与base_path路径必须不同</p>
<h2 id="物理机安装"><a href="#物理机安装" class="headerlink" title="物理机安装"></a>物理机安装</h2><h3 id="1-安装git"><a href="#1-安装git" class="headerlink" title="1.安装git"></a>1.安装git</h3><p><code>yum install -y git</code></p>
<h3 id="2-下载fastdfs源码"><a href="#2-下载fastdfs源码" class="headerlink" title="2.下载fastdfs源码"></a>2.下载fastdfs源码</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/happyfish100/fastdfs.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/happyfish100/libfastcommon.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/happyfish100/fastdfs-nginx-module.git</span><br></pre></td></tr></table></figure>
<h3 id="3-下载nginx"><a href="#3-下载nginx" class="headerlink" title="3.下载nginx"></a>3.下载nginx</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cp /home/jyftp/nginx-1.10.1.tar.gz ./</span><br><span class="line">tar -xvf nginx-1.10.1.tar.gz </span><br><span class="line">rm -rf nginx-1.10.1.tar.gz </span><br><span class="line">chown -R root.root nginx-1.10.1/</span><br><span class="line">mv nginx-1.10.1/ nginx</span><br></pre></td></tr></table></figure>
<h3 id="4-安装libfastcommon-fastdfs依赖的系统库）"><a href="#4-安装libfastcommon-fastdfs依赖的系统库）" class="headerlink" title="4.安装libfastcommon (fastdfs依赖的系统库）"></a>4.安装libfastcommon (fastdfs依赖的系统库）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs/libfastcommon</span><br><span class="line">./make.sh</span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure>
<h3 id="5-安装fastdfs"><a href="#5-安装fastdfs" class="headerlink" title="5.安装fastdfs"></a>5.安装fastdfs</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs/fastdfs</span><br><span class="line">./make.sh</span><br><span class="line">./make.sh install</span><br></pre></td></tr></table></figure>
<h3 id="6-安装nginx"><a href="#6-安装nginx" class="headerlink" title="6.安装nginx"></a>6.安装nginx</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx --conf-path=/usr/<span class="built_in">local</span>/nginx/nginx.conf --add-module=/usr/<span class="built_in">local</span>/fastdfs/fastdfs-nginx-module/src</span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>安装nginx错误处理<br>错误信息：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br></pre></td></tr></table></figure></p>
<p>安装pcre-devel与openssl-devel解决问题，执行下面命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install pcre-devel openssl openssl-devel</span><br></pre></td></tr></table></figure></p>
<p>错误信息：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:894: 错误：‘struct fdfs_http_context’没有名为‘if_modified_since’的成员</span><br><span class="line">/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:897: 错误：‘struct fdfs_http_context’没有名为‘if_modified_since’的成员</span><br><span class="line">/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:927: 错误：‘struct fdfs_http_context’没有名为‘range’的成员</span><br><span class="line">/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:933: 错误：‘struct fdfs_http_context’没有名为‘if_range’的成员</span><br><span class="line">/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:933: 错误：‘true’未声明(在此函数内第一次使用)</span><br><span class="line">make[1]: *** [objs/addon/src/ngx_http_fastdfs_module.o] 错误 1</span><br><span class="line">make[1]: Leaving directory `/data/soft/nginx-1.8.0&apos;</span><br><span class="line">make: *** [build] 错误 2</span><br></pre></td></tr></table></figure></p>
<p>解决办法<br>执行以下2条命令，然后重新make<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ln -sv /usr/include/fastcommon /usr/local/include/fastcommon</span><br><span class="line">ln -sv /usr/include/fastdfs /usr/local/include/fastdfs</span><br></pre></td></tr></table></figure></p>
<p>拷贝相关文件到/etc/fdfs目录下：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp /usr/local/fastdfs/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/</span><br><span class="line">cp /usr/local/fastdfs/fastdfs/conf/mime.types /etc/fdfs/</span><br><span class="line">cp /usr/local/fastdfs/fastdfs/conf/http.conf /etc/fdfs/</span><br><span class="line">cp /usr/local/fastdfs/fastdfs/conf/anti-steal.jpg /etc/fdfs/</span><br></pre></td></tr></table></figure></p>
<p>如果是下面错误，需要安装fastdfs最新版，直接从github上下载源码安装<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">local/fastdfs-nginx-module/src/common.c:1245: 错误：‘FDFSHTTPParams’没有名为‘support_multi_range’的成员</span><br><span class="line">make[1]: *** [objs/addon/src/ngx_http_fastdfs_module.o] 错误 1</span><br><span class="line">make[1]: Leaving directory `/usr/local/nginx-1.10.1&apos;</span><br></pre></td></tr></table></figure></p>
<p>解决办法：github上下载最新FastDFS master源码，重新编译安装即可。</p>
<h3 id="7-配置fastdfs"><a href="#7-配置fastdfs" class="headerlink" title="7.配置fastdfs"></a>7.配置fastdfs</h3><h4 id="7-1-创建数据存放目录（用于存放数据）"><a href="#7-1-创建数据存放目录（用于存放数据）" class="headerlink" title="7.1 创建数据存放目录（用于存放数据）"></a>7.1 创建数据存放目录（用于存放数据）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs</span><br><span class="line">mkdir fast_data</span><br><span class="line"><span class="built_in">cd</span> fast_data</span><br></pre></td></tr></table></figure>
<h5 id="tracker基础数据和日志"><a href="#tracker基础数据和日志" class="headerlink" title="tracker基础数据和日志"></a>tracker基础数据和日志</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir tracker</span><br></pre></td></tr></table></figure>
<h5 id="storage基础数据和日志"><a href="#storage基础数据和日志" class="headerlink" title="storage基础数据和日志"></a>storage基础数据和日志</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir storage</span><br></pre></td></tr></table></figure>
<h5 id="storage-数据存放目录"><a href="#storage-数据存放目录" class="headerlink" title="storage 数据存放目录"></a>storage 数据存放目录</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir store_path</span><br></pre></td></tr></table></figure>
<h5 id="fast-nginx模块基础数据和日志"><a href="#fast-nginx模块基础数据和日志" class="headerlink" title="fast nginx模块基础数据和日志"></a>fast nginx模块基础数据和日志</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir nginx_module</span><br></pre></td></tr></table></figure>
<h4 id="7-2-创建配置文件目录（用于存放使用的配置文件）"><a href="#7-2-创建配置文件目录（用于存放使用的配置文件）" class="headerlink" title="7.2 创建配置文件目录（用于存放使用的配置文件）"></a>7.2 创建配置文件目录（用于存放使用的配置文件）</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir fast_conf</span><br><span class="line">cd /usr/local/fastdfs/fastdfs/conf</span><br><span class="line">cp ./* /usr/local/fastdfs/fast_conf/</span><br></pre></td></tr></table></figure>
<h4 id="7-3-配置tracker"><a href="#7-3-配置tracker" class="headerlink" title="7.3 配置tracker"></a>7.3 配置tracker</h4><h5 id="编辑basepath"><a href="#编辑basepath" class="headerlink" title="编辑basepath"></a>编辑basepath</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">＃basepath(用于存放tracker的基本数据，包括日志）</span><br><span class="line">base_path=/usr/local/fastdfs/fast_data/tracker</span><br></pre></td></tr></table></figure>
<h4 id="7-4-配置storage"><a href="#7-4-配置storage" class="headerlink" title="7.4 配置storage"></a>7.4 配置storage</h4><h5 id="修改如下配置："><a href="#修改如下配置：" class="headerlink" title="修改如下配置："></a>修改如下配置：</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">＃用于存储storage基本数据的目录（包括日志）</span><br><span class="line">base_path=/usr/local/fastdfs/fast_data/storage</span><br><span class="line">＃数据存放的目录</span><br><span class="line">store_path0=/usr/local/fastdfs/fast_data/store_path</span><br><span class="line">＃group的名字</span><br><span class="line">group_name=group1</span><br><span class="line"># tracker地址</span><br><span class="line">tracker_server=10.30.193.163:22122</span><br></pre></td></tr></table></figure>
<h5 id="这个是tracker的ip地址和端口号"><a href="#这个是tracker的ip地址和端口号" class="headerlink" title="这个是tracker的ip地址和端口号"></a>这个是tracker的ip地址和端口号</h5><p><code>tracker_server=192.168.0.48:22122</code></p>
<h4 id="7-5-修改nginx相关的fastdfs配置文件"><a href="#7-5-修改nginx相关的fastdfs配置文件" class="headerlink" title="7.5 修改nginx相关的fastdfs配置文件"></a>7.5 修改nginx相关的fastdfs配置文件</h4><p>将nginx module的配置文件拷贝到fastdfs的配置目录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp /usr/local/fastdfs/fastdfs-nginx-module/src/mod_fastdfs.conf /usr/local/fastdfs/fast_conf</span><br></pre></td></tr></table></figure></p>
<p>修改mod_fastdfs.conf<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#存放日志等文件</span><br><span class="line">base_path=/usr/local/fastdfs/fast_data/nginx_module</span><br><span class="line">#tracker的地址（这个是nginx中的plugin使用的）</span><br><span class="line">tracker_server=192.168.0.48:22122</span><br><span class="line">#本地对应的group名字（当前nginx对应的storage存储的group的名字）</span><br><span class="line">group_name=group1</span><br><span class="line">#这个配置用于说明nginx对应的storage存储文件的实际位置</span><br><span class="line">store_path0=/usr/local/fastdfs/fast_data/store_path</span><br><span class="line">#这个是url是否需要带groupname</span><br><span class="line">url_have_group_name = true</span><br></pre></td></tr></table></figure></p>
<h4 id="9-编写启动脚本"><a href="#9-编写启动脚本" class="headerlink" title="9. 编写启动脚本"></a>9. 编写启动脚本</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd /usr/local/fastdfs</span><br></pre></td></tr></table></figure>
<h4 id="9-1-创建-启动文件目录"><a href="#9-1-创建-启动文件目录" class="headerlink" title="9.1 创建 启动文件目录"></a>9.1 创建 启动文件目录</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir bin</span><br></pre></td></tr></table></figure>
<p>tracker的启动脚本 </p>
<h5 id="9-2-在bin目录下，创建tracker-sh"><a href="#9-2-在bin目录下，创建tracker-sh" class="headerlink" title="9.2 在bin目录下，创建tracker.sh"></a>9.2 在bin目录下，创建tracker.sh</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">    start) </span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/<span class="built_in">local</span>/fastdfs/fast_conf/tracker.conf</span><br><span class="line">    ;;</span><br><span class="line">    stop) </span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/<span class="built_in">local</span>/fastdfs/fast_conf/tracker.conf stop</span><br><span class="line">    ;;</span><br><span class="line">    restart)</span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/<span class="built_in">local</span>/fastdfs/fast_conf/tracker.conf restart </span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">esac</span>   </span><br><span class="line"></span><br><span class="line"><span class="comment"># tailf /usr/local/fastdfs/fast_data/tracker/logs/trackerd.log</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>
<p>将文件变成可执行<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod +x tracker.sh</span><br></pre></td></tr></table></figure></p>
<h5 id="9-3-在bin目录下，创建storage-sh"><a href="#9-3-在bin目录下，创建storage-sh" class="headerlink" title="9.3 在bin目录下，创建storage.sh"></a>9.3 在bin目录下，创建storage.sh</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line"></span><br><span class="line">    start)</span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/storage/fdfs_storaged /usr/<span class="built_in">local</span>/fastdfs/fast_conf/storage.conf </span><br><span class="line">    ;;</span><br><span class="line">    stop)</span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/storage/fdfs_storaged /usr/<span class="built_in">local</span>/fastdfs/fast_conf/storage.conf stop </span><br><span class="line">    ;;</span><br><span class="line">    restart)</span><br><span class="line">	/usr/<span class="built_in">local</span>/fastdfs/fastdfs/storage/fdfs_storaged /usr/<span class="built_in">local</span>/fastdfs/fast_conf/storage.conf restart</span><br><span class="line">    ;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">esac</span>   </span><br><span class="line"></span><br><span class="line"><span class="comment"># tailf /usr/local/fastdfs/fast_data/storage/logs/storaged.log</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>
<p>将文件变成可执行<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod +x storage.sh</span><br></pre></td></tr></table></figure></p>
<h5 id="9-4-配置、启动nginx"><a href="#9-4-配置、启动nginx" class="headerlink" title="9.4 配置、启动nginx"></a>9.4 配置、启动nginx</h5><p>修改<code>mod_fastdfs.conf</code>配置文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd /usr/local/fastdfs/fast_conf/</span><br><span class="line">vi mod_fastdfs.conf</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># FastDFS tracker_server can ocur more than once, and tracker_server format is</span></span><br><span class="line"><span class="comment">#  "host:port", host can be hostname or ip address</span></span><br><span class="line"><span class="comment"># valid only when load_fdfs_parameters_from_tracker is true</span></span><br><span class="line">tracker_server=192.168.0.48:22122</span><br><span class="line"></span><br><span class="line"><span class="comment"># the port of the local storage server</span></span><br><span class="line"><span class="comment"># the default value is 23000</span></span><br><span class="line">storage_server_port=23000</span><br><span class="line"></span><br><span class="line"><span class="comment"># if the url / uri including the group name</span></span><br><span class="line"><span class="comment"># set to false when uri like /M00/00/00/xxx</span></span><br><span class="line"><span class="comment"># set to true when uri like $&#123;group_name&#125;/M00/00/00/xxx, such as group1/M00/xxx</span></span><br><span class="line"><span class="comment"># default value is false</span></span><br><span class="line">url_have_group_name = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># store_path#, based 0, if store_path0 not exists, it's value is base_path</span></span><br><span class="line"><span class="comment"># the paths must be exist</span></span><br><span class="line"><span class="comment"># must same as storage.conf</span></span><br><span class="line">store_path0=/usr/<span class="built_in">local</span>/fastdfs/fast_data/store_path</span><br><span class="line"><span class="comment">#store_path1=/home/yuqing/fastdfs1</span></span><br></pre></td></tr></table></figure>
<p>copy配置文件到 <code>/etc/fdfs</code>下<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/fastdfs/fast_conf/</span><br><span class="line">cp anti-steal.jpg http.conf mime.types mod_fastdfs.conf /etc/fdfs/</span><br></pre></td></tr></table></figure></p>
<p>修改nginx的配置文件<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/nginx</span><br><span class="line">vi nginx.conf</span><br><span class="line">server &#123;</span><br><span class="line">listen 8079;</span><br><span class="line">	location ~/M00 &#123;</span><br><span class="line">	    root /usr/<span class="built_in">local</span>/fastdfs/fast_data/store_path/data;</span><br><span class="line">	    ngx_fastdfs_module;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建软连接<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ln -s /usr/local/fastdfs/fast_data/store_path/data /usr/local/fastdfs/fast_data/store_path/data/M00</span><br></pre></td></tr></table></figure></p>
<p>启动nginx之前先-t检查一下配置文件是否有错误<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -t</span><br></pre></td></tr></table></figure></p>
<p>输出一下信息表示正确<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost bin]# /usr/local/nginx/sbin/nginx -t</span><br><span class="line">ngx_http_fastdfs_set pid=125936</span><br><span class="line">nginx: the configuration file /usr/local/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure></p>
<p>启动nginx<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure></p>
<p>启动 Nginx 后会打印出fastdfs模块的pid，看看日志是否报错，正常不会报错的<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost fdfs]<span class="comment"># /usr/local/nginx/sbin/nginx</span></span><br><span class="line">ngx_http_fastdfs_set pid=126276</span><br></pre></td></tr></table></figure></p>
<h4 id="遇到的错误"><a href="#遇到的错误" class="headerlink" title="遇到的错误"></a>遇到的错误</h4><p>错误：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ERROR - file: storage_ip_changed_dealer.c, line: 186, connect to tracker server 172.0.0.1:22122 fail, errno: 110, error info: Connection timed out</span><br></pre></td></tr></table></figure></p>
<p>防火墙中打开tracker服务器端口（ 默认为 22122）<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<p>附加：若/etc/sysconfig 目录下没有iptables文件可随便写一条iptables命令配置个防火墙规则：如：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">iptables -P OUTPUT ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>然后用命令：service iptables save 进行保存，默认就保存到 /etc/sysconfig/iptables 文件里。这时既有了这个文件。防火墙也可以启动了。接下来要写策略，也可以直接写在/etc/sysconfig/iptables 里了。<br>添加如下端口行：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22122 -j ACCEPT </span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 23000 -j ACCEPT </span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8079 -j ACCEPT </span><br><span class="line"><span class="comment"># 22122 tracker 端口</span></span><br><span class="line"><span class="comment"># 23000 storage 端口</span></span><br><span class="line"><span class="comment"># 8079 nginx listen端口</span></span><br></pre></td></tr></table></figure></p>
<p>重启防火墙<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service iptables restart</span><br></pre></td></tr></table></figure></p>
<h4 id="Fastdfs-Client测试"><a href="#Fastdfs-Client测试" class="headerlink" title="Fastdfs Client测试"></a>Fastdfs Client测试</h4><p>执行命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/bin/fdfs_test /usr/local/fastdfs/fast_conf/client.conf  upload /usr/local/fastdfs/fast_conf/</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">This is FastDFS client <span class="built_in">test</span> program v5.11</span><br><span class="line"></span><br><span class="line">Copyright (C) 2008, Happy Fish / YuQing</span><br><span class="line"></span><br><span class="line">FastDFS may be copied only under the terms of the GNU General</span><br><span class="line">Public License V3, <span class="built_in">which</span> may be found <span class="keyword">in</span> the FastDFS <span class="built_in">source</span> kit.</span><br><span class="line">Please visit the FastDFS Home Page http://www.csource.org/ </span><br><span class="line"><span class="keyword">for</span> more detail.</span><br><span class="line"></span><br><span class="line">[2017-05-16 14:03:07] DEBUG - base_path=/usr/<span class="built_in">local</span>/fastdfs/fast_data, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0</span><br><span class="line"></span><br><span class="line">tracker_query_storage_store_list_without_group: </span><br><span class="line">	server 1. group_name=, ip_addr=192.168.0.48, port=23000</span><br><span class="line"></span><br><span class="line">group_name=group1, ip_addr=192.168.0.48, port=23000</span><br><span class="line">storage_upload_by_filename</span><br><span class="line">group_name=group1, remote_filename=M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489.conf</span><br><span class="line"><span class="built_in">source</span> ip address: 192.168.0.48</span><br><span class="line">file timestamp=2017-05-16 14:03:07</span><br><span class="line">file size=1468</span><br><span class="line">file crc32=3061768110</span><br><span class="line">example file url: http://192.168.0.48/group1/M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489.conf</span><br><span class="line">storage_upload_slave_by_filename</span><br><span class="line">group_name=group1, remote_filename=M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489_big.conf</span><br><span class="line"><span class="built_in">source</span> ip address: 192.168.0.48</span><br><span class="line">file timestamp=2017-05-16 14:03:08</span><br><span class="line">file size=1468</span><br><span class="line">file crc32=3061768110</span><br><span class="line">example file url: http://192.168.0.48/group1/M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489_big.conf</span><br></pre></td></tr></table></figure></p>
<h4 id="查看Fastdfs集群监控信息"><a href="#查看Fastdfs集群监控信息" class="headerlink" title="查看Fastdfs集群监控信息"></a>查看Fastdfs集群监控信息</h4><p>执行命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/bin/fdfs_monitor /usr/local/fastdfs/fast_conf/client.conf</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[2017-05-16 14:17:38] DEBUG - base_path=/usr/<span class="built_in">local</span>/fastdfs/fast_data, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0</span><br><span class="line"></span><br><span class="line">server_count=1, server_index=0</span><br><span class="line"></span><br><span class="line">tracker server is 192.168.0.48:22122</span><br><span class="line"></span><br><span class="line">group count: 1</span><br><span class="line"></span><br><span class="line">Group 1:</span><br><span class="line">group name = group1</span><br><span class="line">disk total space = 46161 MB</span><br><span class="line">disk free space = 33446 MB</span><br><span class="line">trunk free space = 0 MB</span><br><span class="line">storage server count = 1</span><br><span class="line">active server count = 1</span><br><span class="line">storage server port = 23000</span><br><span class="line">storage HTTP port = 8888</span><br><span class="line">store path count = 1</span><br><span class="line">subdir count per path = 256</span><br><span class="line">current write server index = 0</span><br><span class="line">current trunk file id = 0</span><br><span class="line"></span><br><span class="line">	Storage 1:</span><br><span class="line">		id = 192.168.0.48</span><br><span class="line">		ip_addr = 192.168.0.48  ACTIVE</span><br><span class="line">		http domain = </span><br><span class="line">		version = 5.11</span><br><span class="line">		join time = 2017-05-16 11:40:48</span><br><span class="line">		up time = 2017-05-16 13:04:57</span><br><span class="line">		total storage = 46161 MB</span><br><span class="line">		free storage = 33446 MB</span><br><span class="line">		upload priority = 10</span><br><span class="line">		store_path_count = 1</span><br><span class="line">		subdir_count_per_path = 256</span><br><span class="line">		storage_port = 23000</span><br><span class="line">		storage_http_port = 8888</span><br><span class="line">		current_write_path = 0</span><br><span class="line">		<span class="built_in">source</span> storage id = </span><br><span class="line">		if_trunk_server = 0</span><br><span class="line">		connection.alloc_count = 256</span><br><span class="line">		connection.current_count = 0</span><br><span class="line">		connection.max_count = 2</span><br><span class="line">		total_upload_count = 3</span><br><span class="line">		success_upload_count = 3</span><br><span class="line">		total_append_count = 0</span><br><span class="line">		success_append_count = 0</span><br><span class="line">		total_modify_count = 0</span><br><span class="line">		success_modify_count = 0</span><br><span class="line">		total_truncate_count = 0</span><br><span class="line">		success_truncate_count = 0</span><br><span class="line">		total_set_meta_count = 3</span><br><span class="line">		success_set_meta_count = 3</span><br><span class="line">		total_delete_count = 0</span><br><span class="line">		success_delete_count = 0</span><br><span class="line">		total_download_count = 0</span><br><span class="line">		success_download_count = 0</span><br><span class="line">		total_get_meta_count = 0</span><br><span class="line">		success_get_meta_count = 0</span><br><span class="line">		total_create_link_count = 0</span><br><span class="line">		success_create_link_count = 0</span><br><span class="line">		total_delete_link_count = 0</span><br><span class="line">		success_delete_link_count = 0</span><br><span class="line">		total_upload_bytes = 4738</span><br><span class="line">		success_upload_bytes = 4738</span><br><span class="line">		total_append_bytes = 0</span><br><span class="line">		success_append_bytes = 0</span><br><span class="line">		total_modify_bytes = 0</span><br><span class="line">		success_modify_bytes = 0</span><br><span class="line">		stotal_download_bytes = 0</span><br><span class="line">		success_download_bytes = 0</span><br><span class="line">		total_sync_in_bytes = 0</span><br><span class="line">		success_sync_in_bytes = 0</span><br><span class="line">		total_sync_out_bytes = 0</span><br><span class="line">		success_sync_out_bytes = 0</span><br><span class="line">		total_file_open_count = 3</span><br><span class="line">		success_file_open_count = 3</span><br><span class="line">		total_file_read_count = 0</span><br><span class="line">		success_file_read_count = 0</span><br><span class="line">		total_file_write_count = 3</span><br><span class="line">		success_file_write_count = 3</span><br><span class="line">		last_heart_beat_time = 2017-05-16 14:17:31</span><br><span class="line">		last_source_update = 2017-05-16 14:14:16</span><br><span class="line">		last_sync_update = 1970-01-01 08:00:00</span><br><span class="line">		last_synced_timestamp = 1970-01-01 08:00:00</span><br></pre></td></tr></table></figure></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-04-23T01:48:15.028Z" itemprop="dateUpdated">2024-04-23 09:48:15</time>
</span><br>


        
        原始链接：<a href="/20170704/02-fastdfs-installer.html" target="_blank" rel="external">https://ningyu1.github.io/20170704/02-fastdfs-installer.html</a><br>版权声明：本文由 <strong>凝雨-Yun</strong> 原创，采用<strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a></strong>进行许可。 <br><strong>转载请注明作者及出处！</strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
        
    </div>
    
    <footer>
        <a href="https://ningyu1.github.io">
            <img src="/img/avatar.jpg" alt="凝雨">
            凝雨
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fastdfs/">fastdfs</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&title=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&title=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20170704/02-fastdfs-installer.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/20170719/04-lombok-quick-start.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Lombok使用说明</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/20170630/03-nginx-502-Bad-Gateway.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Nginx 502 Bad Gateway问题分析与踩过的坑</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: '298f0d78bd14c9c0ff01',
          clientSecret: 'e81e4d36caf1a13d2f05ed5dcf30e636dde749ac',
          repo: 'blog',
          owner: 'ningyu1',
          admin: ['ningyu1'],
          id: id,      // Ensure uniqueness and length less than 50
	  //id: 'Comments',
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        可以吃个鸡腿吗？
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh">知识共享署名-相同方式共享 4.0 国际许可协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>凝雨 &copy; 2016 - 2024</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&title=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&title=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20170704/02-fastdfs-installer.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Fastdfs安装说明与常见问题解决》 — 凝雨 - Yun&url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20170704/02-fastdfs-installer.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIElEQVR42u3azYrrMAwG0L7/S+duZjEwxHyS0guxj1elpLFPF0I//nzidf1af7/Pn+/t8tjCwMB4LeNarvkGyTsnz2BgYJzDuNv+7vN64zt8b6/18xgYGBjJq5PEsRfWMTAwMHqMXvK3/i0GBgZGwsgTvt4Rq6H5i7U4BgbGCxl5y+z/f/7KfAMDA+NVjKu4koD4bIoZnQoDA2NrRh7g8gI1T90maR8GBsY5jLxM/XYgzkvcTzWiY2BgvJyRB8q8+Ow1y6rjzKh3iIGBsR0jH0n2xgB5CM5HmBgYGKcxqgVk9RDVSxXJLhgYGBjzZlx+rGpTr1zEYmBgbMToHas5kYiL58JfjIGBcRij2obrxcA83Be6hhgYGNsxkvQraaVNWm+9N5SrcAwMjJcz8iFBtcVfbc81L1tgYGBsypiMKvMBQPXoeZr48w0GBsbWjHn4S4rM3nWNwjAAAwPjGEa1ZZYXutWUsTryxMDAOI1xxWtePVevq+bNQQwMjP0Yk0uryfbzlDEKuBgYGAcwqmv92+qwM3/mNuxiYGAcyaimaE+NE5qhHwMDY1NGL8iuD5dXzHkQf6y5hoGB8UJGb8DZO/qkudbsHWJgYGzEyIvVSYstxzQDPQYGxgGM+QWLKntSxGJgYGDkaVl+/WJSb0ZUDAwMjOCZySDhsREmBgbG1oxqGF1v2Wvx54U0BgbGaYzeFYfqADJvpU1KZQwMjO0Y/wDBeVWDGRkOUwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-indigo-patch@1.0.0/source/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
