<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-113235655-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?83434579b8f6b6a6c80fd1b4fe2d9afa"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="tyyr-WLO-Sq85TjMOOOHRRc5YD4W8if8mCXbUD_p_7k">
    
    
    <meta name="sogou_site_verification" content="PlW7T4UKFR">
    
    
    <meta name="baidu-site-verification" content="AdjyK6UssW">
    
    
    <meta name="msvalidate.01" content="BC20DDADC069448DFBCA67D9D7D57546">
    
    
    <meta name="360-site-verification" content="3addb98f1fb5f6b4d1ce03efc23bf5b8">
    
    
    
    <title>Docker Registry镜像清理问题 | 凝雨 - Yun | 快乐编程每一天 - Happy Coding Every Day</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="docker,docker registry,docker registry web,docker registry frontend">
    <meta name="description" content="Docker Registry镜像清理问题">
<meta name="keywords" content="docker,docker registry,docker registry web,docker registry frontend">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker Registry镜像清理问题">
<meta property="og:url" content="https://ningyu1.github.io/20171229/46-docker-registry.html">
<meta property="og:site_name" content="凝雨 - Yun">
<meta property="og:description" content="Docker Registry镜像清理问题">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/1.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/2.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/3.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/4.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/5.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/6.png">
<meta property="og:image" content="https://ningyu1.github.io/img/docker-registry/7.png">
<meta property="og:updated_time" content="2024-04-23T01:48:15.034Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker Registry镜像清理问题">
<meta name="twitter:description" content="Docker Registry镜像清理问题">
<meta name="twitter:image" content="https://ningyu1.github.io/img/docker-registry/1.png">
    
        <link rel="alternate" type="application/atom+xml" title="凝雨 - Yun" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">凝雨</h5>
          <a href="mailto:ningbe111@163.com" title="ningbe111@163.com" class="mail">ningbe111@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives/"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/ningyu1" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about/"  >
                <i class="icon icon-lg icon-user"></i>
                About
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/atom.xml" target="_blank" >
                <i class="icon icon-lg icon-rss"></i>
                Rss
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://g2.okk.dog/?path=register&code=qn7nOwdj" target="_blank" >
                <i class="icon icon-lg icon-rocket"></i>
                科学上网
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Docker Registry镜像清理问题</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Docker Registry镜像清理问题</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-29T06:45:36.000Z" itemprop="datePublished" class="page-time">
  2017-12-29
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/docker/">docker</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>文章目录</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#目录"><span class="post-toc-number">1.</span> <span class="post-toc-text">目录</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#修改Docker-Registry配置"><span class="post-toc-number">2.</span> <span class="post-toc-text">修改Docker Registry配置</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用Registry-V2-RestfulAPI-删除镜像"><span class="post-toc-number">3.</span> <span class="post-toc-text">使用Registry V2 RestfulAPI 删除镜像</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Docker-Registry-GC回收空间"><span class="post-toc-number">4.</span> <span class="post-toc-text">Docker Registry GC回收空间</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用UI管理Docker-Registry"><span class="post-toc-number">5.</span> <span class="post-toc-text">使用UI管理Docker Registry</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#docker-registry-frontend"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">docker-registry-frontend</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#hyper-docker-registry-web"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">hyper/docker-registry-web</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-46-docker-registry"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Docker Registry镜像清理问题</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-29 14:45:36" datetime="2017-12-29T06:45:36.000Z"  itemprop="datePublished">2017-12-29</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/docker/">docker</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ol>
<li><a href="#config">修改Docker Registry配置</a></li>
<li><a href="#restful">使用Registry V2 RestfulAPI 删除镜像</a></li>
<li><a href="#gc">Docker Registry GC回收空间</a></li>
<li><a href="#ui">使用UI管理Docker Registry</a></li>
</ol>
<h1 id="修改Docker-Registry配置"><a href="#修改Docker-Registry配置" class="headerlink" title="修改Docker Registry配置"></a><a name="config">修改Docker Registry配置</a></h1><p>配置开启删除功能:config.yml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">version: 0.1</span><br><span class="line">log:</span><br><span class="line">  fields:</span><br><span class="line">    service: registry</span><br><span class="line">storage:</span><br><span class="line">    delete:</span><br><span class="line">        enabled: true</span><br><span class="line">    cache:</span><br><span class="line">        blobdescriptor: inmemory</span><br><span class="line">    filesystem:</span><br><span class="line">        rootdirectory: /var/lib/registry</span><br><span class="line">http:</span><br><span class="line">    addr: :5000</span><br><span class="line">    headers:</span><br><span class="line">        X-Content-Type-Options: [nosniff]</span><br><span class="line">health:</span><br><span class="line">  storagedriver:</span><br><span class="line">    enabled: true</span><br><span class="line">    interval: 10s</span><br><span class="line">    threshold: 3</span><br></pre></td></tr></table></figure>
<p><span style="color:red"><strong>主要在storage下增加delete开启状态 enabled:true</strong></span></p>
<p>具体配置参考官方配置详情：<a href="https://github.com/docker/distribution/blob/master/docs/configuration.md" target="_blank" rel="noopener">https://github.com/docker/distribution/blob/master/docs/configuration.md</a></p>
<h1 id="使用Registry-V2-RestfulAPI-删除镜像"><a href="#使用Registry-V2-RestfulAPI-删除镜像" class="headerlink" title="使用Registry V2 RestfulAPI 删除镜像"></a><a name="restful">使用Registry V2 RestfulAPI 删除镜像</a></h1><p>镜像删除之前需要获取镜像的digest值</p>
<ul>
<li>获取镜像digest值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl --cacert /etc/docker/certs.d/192.168.0.34\:5000/ca.crt -H &quot;Accept:application/vnd.docker.distribution.manifest.v2+json&quot; https://192.168.0.34:5000/v2/messer/manifests/1.0</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<p>我们配置了证书，所以必须要添加证书 –cacert使用crt证书</p>
<p>在获取镜像digest值时必须要指定Header “Accept:application/vnd.docker.distribution.manifest.v2+json” 否则无法获取</p>
<p>RESTful API格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/v2/&lt;镜像名称&gt;/manifests/&lt;tag&gt;</span><br></pre></td></tr></table></figure>
<p>具体Docker registry V2 RESTful API查看：<a href="https://docs.docker.com/registry/spec/api/" target="_blank" rel="noopener">https://docs.docker.com/registry/spec/api/</a></p>
<ul>
<li>通过上面获取到的具体返回信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &quot;schemaVersion&quot;: 2,</span><br><span class="line">   &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,</span><br><span class="line">   &quot;config&quot;: &#123;</span><br><span class="line">      &quot;mediaType&quot;: &quot;application/octet-stream&quot;,</span><br><span class="line">      &quot;size&quot;: 4191,</span><br><span class="line">      &quot;digest&quot;: &quot;sha256:c8043677c5d750e0904298c29825d1da8389a1ea2e2564e076ed54a023ece056&quot;</span><br><span class="line">   &#125;,</span><br><span class="line">   &quot;layers&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.image.rootfs.diff.tar.gzip&quot;,</span><br><span class="line">         &quot;size&quot;: 51363125,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:75a822cd7888e394c49828b951061402d31745f596b1f502758570f2d0ee79e2&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.image.rootfs.diff.tar.gzip&quot;,</span><br><span class="line">         &quot;size&quot;: 20179224,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:0aefb9dc4a57d3de6a9cfa2e87e4502dfa8ce3876264bb20783b1610f8e44806&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.image.rootfs.diff.tar.gzip&quot;,</span><br><span class="line">         &quot;size&quot;: 193,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:046e44ee6057f1264d00b0c54adcff2f2c44d30a29b50dfef928776f7aa45cc8&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.image.rootfs.diff.tar.gzip&quot;,</span><br><span class="line">         &quot;size&quot;: 596,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:614a7b3525a1442775b9d1b52413024dc750b6a9169fcae8d4ef9cf98bda7f0f&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;mediaType&quot;: &quot;application/vnd.docker.image.rootfs.diff.tar.gzip&quot;,</span><br><span class="line">         &quot;size&quot;: 1083978,</span><br><span class="line">         &quot;digest&quot;: &quot;sha256:5fe57df972ae5e10f02783cb372841e6feab67a296e2abc16f9a868e4322c33d&quot;</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们要的就是<code>&quot;digest&quot;: &quot;sha256:c8043677c5d750e0904298c29825d1da8389a1ea2e2564e076ed54a023ece056&quot;</code>这个值</p>
<ul>
<li>通过delete接口删除镜像</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl --cacert /etc/docker/certs.d/192.168.0.34\:5000/ca.crt -X DELETE https://192.168.0.34:5000/v2/messer/manifests/sha256:c8043677c5d750e0904298c29825d1da8389a1ea2e2564e076ed54a023ece056</span><br></pre></td></tr></table></figure>
<p>返回不是404 就是删除了</p>
<p>具体Docker registry V2 RESTful API查看：<a href="https://docs.docker.com/registry/spec/api/" target="_blank" rel="noopener">https://docs.docker.com/registry/spec/api/</a></p>
<h1 id="Docker-Registry-GC回收空间"><a href="#Docker-Registry-GC回收空间" class="headerlink" title="Docker Registry GC回收空间"></a><a name="gc">Docker Registry GC回收空间</a></h1><p>但是实际上并没有删除，只是删除了 Registry 的索引。实际文件并没有删除。</p>
<p>最后还需要执行镜像的垃圾回收：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">registry garbage-collect /etc/docker/registry/config.yml</span><br></pre></td></tr></table></figure>
<p>上面需要进入到registry容器里面去执行，/etc/docker/registry/config.yml为配置文件路径</p>
<p>gc完后会看到被gc的信息例如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">root@83d6f5acc9f5:/# /bin/registry garbage-collect /etc/docker/registry/config.yml</span><br><span class="line">INFO[0013] Deleting blob: /docker/registry/v2/blobs/sha256/c0/c0c9ad6136b5e7b142c48c7167eede3d15af54c538f7f3177c50693006cca242  go.version=go1.6.2 instance.id=73c88c92-c196-413e-9cdf-413760de2a62</span><br><span class="line">INFO[0013] Deleting blob: /docker/registry/v2/blobs/sha256/0c/0c1f3512513001c7e37c0dff11064a5c76ad9098507ee74189d6a810742173d7  go.version=go1.6.2 instance.id=73c88c92-c196-413e-9cdf-413760de2a62</span><br></pre></td></tr></table></figure>
<p>如果没有任何输出证明没有回收到任何东西。</p>
<h1 id="使用UI管理Docker-Registry"><a href="#使用UI管理Docker-Registry" class="headerlink" title="使用UI管理Docker Registry"></a><a name="ui">使用UI管理Docker Registry</a></h1><p>上面是通过Docker registry V2 RESTful API的方式删除，也可以通过UI工具删除，目前Docker registry UI工具也比较多这里介绍两个， docker-registry-frontend和hyper/docker-registry-web。</p>
<h2 id="docker-registry-frontend"><a href="#docker-registry-frontend" class="headerlink" title="docker-registry-frontend"></a>docker-registry-frontend</h2><p>我们使用的是 docker-registry-frontend但是他的功能比较弱没有删除的操作，只能浏览，虽然他的说明里面有说明添加了删除功能但是发布的版本中并没有合并删除功能的代码：</p>
<p>官方hub信息：<a href="https://hub.docker.com/r/konradkleine/docker-registry-frontend/" target="_blank" rel="noopener">https://hub.docker.com/r/konradkleine/docker-registry-frontend/</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/1.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>这个<code>MODE_BROWSE_ONLY=false</code>这个配置是完全没有效果的，今天可以查看docker-registry-frontend的github issue：<a href="https://github.com/kwk/docker-registry-frontend/issues/106" target="_blank" rel="noopener">https://github.com/kwk/docker-registry-frontend/issues/106</a></p>
<h2 id="hyper-docker-registry-web"><a href="#hyper-docker-registry-web" class="headerlink" title="hyper/docker-registry-web"></a>hyper/docker-registry-web</h2><p>这个UI虽然不是很好看，但是有删除功能</p>
<p>官方hub信息：<a href="https://hub.docker.com/r/hyper/docker-registry-web/" target="_blank" rel="noopener">https://hub.docker.com/r/hyper/docker-registry-web/</a></p>
<p>创建步骤根据官方hub上面的说明信息一步一步做就ok了，但是这个东西做的不太好速度有点慢。</p>
<p>界面预览：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/2.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/3.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/4.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/5.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>不管是通过RESTful API还是UI删除镜像，都需要去再registry里去gc一下才能真正释放空间，如下时候gc后的效果图</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/6.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/docker-registry/7.png" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2024-04-23T01:48:15.034Z" itemprop="dateUpdated">2024-04-23 09:48:15</time>
</span><br>


        
        原始链接：<a href="/20171229/46-docker-registry.html" target="_blank" rel="external">https://ningyu1.github.io/20171229/46-docker-registry.html</a><br>版权声明：本文由 <strong>凝雨-Yun</strong> 原创，采用<strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a></strong>进行许可。 <br><strong>转载请注明作者及出处！</strong><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>
        
    </div>
    
    <footer>
        <a href="https://ningyu1.github.io">
            <img src="/img/avatar.jpg" alt="凝雨">
            凝雨
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker-registry/">docker registry</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker-registry-frontend/">docker registry frontend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker-registry-web/">docker registry web</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20171229/46-docker-registry.html&title=《Docker Registry镜像清理问题》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20171229/46-docker-registry.html&title=《Docker Registry镜像清理问题》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20171229/46-docker-registry.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Docker Registry镜像清理问题》 — 凝雨 - Yun&url=https://ningyu1.github.io/20171229/46-docker-registry.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20171229/46-docker-registry.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/20180109/47-jenkins-svn-maven-timezone.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Jenkins、SVN、MAVEN打包时区问题解决方案</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/20171225/45-spring-cloud-netflix.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Spring Cloud Netflix架构浅析</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: '298f0d78bd14c9c0ff01',
          clientSecret: 'e81e4d36caf1a13d2f05ed5dcf30e636dde749ac',
          repo: 'blog',
          owner: 'ningyu1',
          admin: ['ningyu1'],
          id: id,      // Ensure uniqueness and length less than 50
	  //id: 'Comments',
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        可以吃个鸡腿吗？
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/deed.zh">知识共享署名-相同方式共享 4.0 国际许可协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>凝雨 &copy; 2016 - 2024</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ningyu1.github.io/20171229/46-docker-registry.html&title=《Docker Registry镜像清理问题》 — 凝雨 - Yun&pic=https://ningyu1.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ningyu1.github.io/20171229/46-docker-registry.html&title=《Docker Registry镜像清理问题》 — 凝雨 - Yun&source=快乐编程每一天 - Happy Coding Every Day" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ningyu1.github.io/20171229/46-docker-registry.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Docker Registry镜像清理问题》 — 凝雨 - Yun&url=https://ningyu1.github.io/20171229/46-docker-registry.html&via=https://ningyu1.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ningyu1.github.io/20171229/46-docker-registry.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIklEQVR42u3aQY7DMAgF0Ln/pTPbkUZJ+eAsar+sqiat/VoJYeDnp3xdf65Vz/+/m64SXxgYGF/LuB6v+jOV7d49v2BdDAyMAxj15e+Web77zK6s9WHPGBgYGGFgnQdfDAwMjDnjOY2bHEoxMDAwJofYemBNy3BpcomBgXEaYxIE3379Sn8DAwPjqxhXeKWH2Ep4XbArDAyMrRlpmax+cK0H7slPhoGBcQLj+cP1u5XW5qojbvAbY2BgbMqYjGf1Bi/m34aBgXECo77ke23OyboYGBjnMCrJWS8EP6+VHoZvq4YYGBgHMOqvm0fNsAAXhGAMDIytGb3yWa/FmL5fKdvd/jMYGBibMuohr9eqrCd89e/BwMA4jVE/ZKbH0bTPWKmhffgfMDAwNmJMyvRpA7J3iI2HLTAwMLZj9AZJ6+lanbcAjIGBsSmjl+StamoG5bPesAUGBsYWjLQclhbgeuMU8bAFBgbGwYw04KYtgV7i2JwcwcDA2IjRC3/pRuPOamVFDAyMAxjzlkB63J20ToO5NgwMjO0YkxJbfdgiLa5VUlIMDIxdGVd41fGlSbRyuP/AxsDA2JrRC3PpKFi6rbWHXgwMjD0YkyGJ9LNpCA7anBgYGAcw0sCXJpT1Zmca+jEwMDDSVmWae6bDHMu6rBgYGMcweklkvVUZtB8wMDAOYPQGLNJNpM+8Um7DwMD4QsaqBK6+zCR9HDU1MTAwvo/xC0IRiYf9bxLNAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-indigo-patch@1.0.0/source/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>










</body>
</html>
